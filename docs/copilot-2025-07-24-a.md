# Prompt

Can I use you to automate the process of reading text messages that we have stored in one of our internal systems and converting the unstructured text into json data? I'm able to use python and bash for coding

## Answers

- The messages are stored in a local instance of Request Tracker version 4.3.3 (https://docs.bestpractical.com/rt/4.4.3/index.html).
- The JSON should store:
    - some standard ticket metedata:
        - id
        - date
        - subject
        - requestor
    - nullable values extracted from the unstructured text of the subject and body
        - recipients
            - name
            - email
            - is new recipient (true/false)
        - project name
        - batch name
        - delivery method
            - push to bucket
            - type of bucket
            - push to SFTP server
            - push to Globus
            - push to Aspera server
            - host on SFTP
            - host on Globus
            - other method
        - list of records for the attachments
            - original_name
            - attachment_timestamp
            - data_file  # see below
        - number of samples
        - list of the data types to be delivered
            - fastq
            - cram
            - vcf
            - other
        - list of data source locations, possibly augmented by sample names and other metadata

All of the information, including downloads of the attachments should go into a new directory named after the id number, expressed in Python as f"rt{id}".

Processing the request will require extracting as much structured information as possible from the subject and body.

Then the attachments must be examined to extract data locations and when available the corresponding sample identifiers. The attachments could be in either CSV, TXT, or XLSX formats. THe TXT format is used only when the attachment is a simple list of data files or locations.

Whether the informations is in an attachment or or the body of the ticket, we need an output file named after this Python f-string pattern: f"data-rt{id}-{year}-{month}-{data}-{letter}", where `letter` is a lowercase letter to ensure uniqueness of the file name. Multiple attachments can appear with a ticket.

## Sample 1

```
Mon Jul 21 09:48:31 2025 <sravyavenkata.bhamidipati@bcm.edu> - Ticket created [Reply] [Comment] [Forward]
CC:	"Zhang, Yang" <Yang.Zhang@bcm.edu>
Subject:	Request for fastq files
Date:	Mon, 21 Jul 2025 14:45:38 +0000
To:	"rt@hgsc.bcm.edu" <rt@hgsc.bcm.edu>
From:	"Bhamidipati, Sravya Venkata" <SravyaVenkata.Bhamidipati@bcm.edu>

Hello,



Our collaborator @Zhang, Yang, needs access to the fastq files for the attached samples. he could not locate the files himself from the cluster. kindly provide him with the needed files.



Thanks
Sravya



Sravya Bhamidipati, M.S.

Sample Intake Team Lead & Library Project Coordinator

Human Genome Sequencing Center,

Alkek Bldg N1505, 77030

Phone: 713-798-1198
```

## Sample 2

```
Mon Jun 30 11:47:10 2025 u242866 (James Hwang) - Ticket created [Reply] [Comment] [Forward]
Subject:	[SUBMISSION] MFTS Submission for Claudia Carvalho, MECP2 Cohort 2 LR batch 6, 2 sample(s).
Date:	Mon, 30 Jun 2025 11:47:10 -0500
To:	rt@rt.hgsc.bcm.edu
From:	James.Hwang@bcm.edu

Hi All,

We would like to request data submission through MFTS to Claudia Carvalho's group for 2 PacBio WGS sample(s).

Please see the excel for the paths and transfer all files in each folder except for the *.txt file, organized by sample ID.

For the directories that contain symbolic links, please transfer the target file. There will be a total of 9 files per sample.

Please send the data files to the recipient, and include MD5 checksums with the excel itself

Cliff Lun
clun@pnri.org

Previous submission for this group can be found at RT# 36164

Please let me know if you need any additional information, thanks!

Sincerely,
James Hwang
```
